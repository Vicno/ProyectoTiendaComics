--
-- Script was generated by Devart dbForge Studio for MySQL, Version 8.0.40.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 11/9/2018 17:46:16
-- Server version: 5.5.5-10.1.34-MariaDB
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE tiendacomics;

--
-- Drop table `comicespecial`
--
DROP TABLE IF EXISTS comicespecial;

--
-- Drop table `comicpersonajes`
--
DROP TABLE IF EXISTS comicpersonajes;

--
-- Drop table `detallecompra`
--
DROP TABLE IF EXISTS detallecompra;

--
-- Drop table `detalleventa`
--
DROP TABLE IF EXISTS detalleventa;

--
-- Drop table `dibujantecomic`
--
DROP TABLE IF EXISTS dibujantecomic;

--
-- Drop table `guionistacomic`
--
DROP TABLE IF EXISTS guionistacomic;

--
-- Drop table `comic`
--
DROP TABLE IF EXISTS comic;

--
-- Drop table `tipoespecial`
--
DROP TABLE IF EXISTS tipoespecial;

--
-- Drop table `personajes`
--
DROP TABLE IF EXISTS personajes;

--
-- Drop table `factura`
--
DROP TABLE IF EXISTS factura;

--
-- Drop table `venta`
--
DROP TABLE IF EXISTS venta;

--
-- Drop table `dibujante`
--
DROP TABLE IF EXISTS dibujante;

--
-- Drop table `guionista`
--
DROP TABLE IF EXISTS guionista;

--
-- Drop table `facturac`
--
DROP TABLE IF EXISTS facturac;

--
-- Drop table `compra`
--
DROP TABLE IF EXISTS compra;

--
-- Drop table `distribuidora`
--
DROP TABLE IF EXISTS distribuidora;

--
-- Set default database
--
USE tiendacomics;

--
-- Create table `distribuidora`
--
CREATE TABLE distribuidora (
  codigodistribuidora int(11) NOT NULL,
  nombredistribuidora varchar(55) DEFAULT NULL,
  telefono int(11) DEFAULT NULL,
  pais varchar(55) DEFAULT NULL,
  PRIMARY KEY (codigodistribuidora)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 8192,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `compra`
--
CREATE TABLE compra (
  numerocompra int(11) NOT NULL,
  fecha date DEFAULT NULL,
  codigodistribuidor int(11) DEFAULT NULL,
  PRIMARY KEY (numerocompra)
)
ENGINE = INNODB,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE compra
ADD CONSTRAINT FK_compra_distribuidora_codigodistribuidora FOREIGN KEY (codigodistribuidor)
REFERENCES distribuidora (codigodistribuidora) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create table `facturac`
--
CREATE TABLE facturac (
  numerocompra int(11) NOT NULL,
  nit int(11) DEFAULT NULL,
  nombre varchar(55) DEFAULT NULL,
  PRIMARY KEY (numerocompra)
)
ENGINE = INNODB,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE facturac
ADD CONSTRAINT FK_facturac_compra_numerocompra FOREIGN KEY (numerocompra)
REFERENCES compra (numerocompra) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create table `guionista`
--
CREATE TABLE guionista (
  codigoGuionista int(11) NOT NULL,
  nombreGuionista varchar(255) DEFAULT NULL,
  PRIMARY KEY (codigoGuionista)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 4096,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `dibujante`
--
CREATE TABLE dibujante (
  codigodibujante int(11) NOT NULL AUTO_INCREMENT,
  nombredibujante varchar(255) DEFAULT NULL,
  PRIMARY KEY (codigodibujante)
)
ENGINE = INNODB,
AUTO_INCREMENT = 8,
AVG_ROW_LENGTH = 2730,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `venta`
--
CREATE TABLE venta (
  numeroVenta int(11) NOT NULL,
  fecha date DEFAULT NULL,
  PRIMARY KEY (numeroVenta)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 3276,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `factura`
--
CREATE TABLE factura (
  numeroVenta int(11) NOT NULL,
  ID int(11) DEFAULT NULL,
  nombre varchar(55) DEFAULT NULL,
  PRIMARY KEY (numeroVenta)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 8192,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE factura
ADD CONSTRAINT FK_factura_venta_numeroVenta FOREIGN KEY (numeroVenta)
REFERENCES venta (numeroVenta) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create table `personajes`
--
CREATE TABLE personajes (
  codigoPersonaje int(11) NOT NULL AUTO_INCREMENT,
  nombrePersonaje varchar(255) DEFAULT NULL,
  PRIMARY KEY (codigoPersonaje)
)
ENGINE = INNODB,
AUTO_INCREMENT = 4,
AVG_ROW_LENGTH = 8192,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `tipoespecial`
--
CREATE TABLE tipoespecial (
  codigoEspecial int(11) NOT NULL,
  Descripcion varchar(255) DEFAULT NULL,
  PRIMARY KEY (codigoEspecial)
)
ENGINE = INNODB,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `comic`
--
CREATE TABLE comic (
  codigoComic bigint(20) NOT NULL,
  Titulo varchar(100) DEFAULT NULL,
  numeroComic int(11) DEFAULT NULL,
  añoPublicacion year(4) DEFAULT NULL,
  editorial varchar(255) DEFAULT NULL,
  descripcion varchar(255) DEFAULT NULL,
  precio double DEFAULT NULL,
  PRIMARY KEY (codigoComic)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 8192,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `guionistacomic`
--
CREATE TABLE guionistacomic (
  codigoGuionista int(11) NOT NULL,
  codigoComic bigint(20) NOT NULL,
  PRIMARY KEY (codigoGuionista, codigoComic)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 4096,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE guionistacomic
ADD CONSTRAINT FK_guionistacomic_comic_codigoComic FOREIGN KEY (codigoComic)
REFERENCES comic (codigoComic) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create foreign key
--
ALTER TABLE guionistacomic
ADD CONSTRAINT FK_guionistacomic_guionista_codigoGuionista FOREIGN KEY (codigoGuionista)
REFERENCES guionista (codigoGuionista) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create table `dibujantecomic`
--
CREATE TABLE dibujantecomic (
  codigoComic bigint(20) NOT NULL,
  codigoDibujante int(11) NOT NULL,
  PRIMARY KEY (codigoComic, codigoDibujante)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 2048,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE dibujantecomic
ADD CONSTRAINT FK_digujantecomic_comic_codigoComic FOREIGN KEY (codigoComic)
REFERENCES comic (codigoComic) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create foreign key
--
ALTER TABLE dibujantecomic
ADD CONSTRAINT FK_digujantecomic_dibujante_codigodibujante FOREIGN KEY (codigoDibujante)
REFERENCES dibujante (codigodibujante) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create table `detalleventa`
--
CREATE TABLE detalleventa (
  codigodetalleventa int(11) NOT NULL,
  codigoComic bigint(20) DEFAULT NULL,
  numeroVenta int(11) DEFAULT NULL,
  cantidad int(11) DEFAULT NULL,
  PRIMARY KEY (codigodetalleventa)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 8192,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE detalleventa
ADD CONSTRAINT FK_detalleventa_comic_codigoComic FOREIGN KEY (codigoComic)
REFERENCES comic (codigoComic) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE detalleventa
ADD CONSTRAINT FK_detalleventa_venta_numeroVenta FOREIGN KEY (numeroVenta)
REFERENCES venta (numeroVenta) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Create table `detallecompra`
--
CREATE TABLE detallecompra (
  codigodetallecompra int(11) NOT NULL,
  codigocomic bigint(20) DEFAULT NULL,
  numerocompra int(11) DEFAULT NULL,
  cantidad int(11) DEFAULT NULL,
  precioCompraUnidad int(11) DEFAULT NULL,
  PRIMARY KEY (codigodetallecompra)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 16384,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE detallecompra
ADD CONSTRAINT FK_detallecompra_comic_codigoComic FOREIGN KEY (codigocomic)
REFERENCES comic (codigoComic) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE detallecompra
ADD CONSTRAINT FK_detallecompra_compra_numerocompra FOREIGN KEY (numerocompra)
REFERENCES compra (numerocompra) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Create table `comicpersonajes`
--
CREATE TABLE comicpersonajes (
  códigoComic bigint(20) NOT NULL,
  códigoPersonaje int(11) NOT NULL,
  PRIMARY KEY (códigoComic, códigoPersonaje)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 4096,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE comicpersonajes
ADD CONSTRAINT FK_comicpersonajes_comic_codigoComic FOREIGN KEY (códigoComic)
REFERENCES comic (codigoComic) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create foreign key
--
ALTER TABLE comicpersonajes
ADD CONSTRAINT FK_comicpersonajes_personajes_codigoPersonaje FOREIGN KEY (códigoPersonaje)
REFERENCES personajes (codigoPersonaje) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create table `comicespecial`
--
CREATE TABLE comicespecial (
  codigocomic bigint(20) NOT NULL,
  codigoEspecial int(11) NOT NULL,
  PRIMARY KEY (codigocomic, codigoEspecial)
)
ENGINE = INNODB,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE comicespecial
ADD CONSTRAINT FK_comicespecial_comic_codigoComic FOREIGN KEY (codigocomic)
REFERENCES comic (codigoComic) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE comicespecial
ADD CONSTRAINT FK_comicespecial_tipoespecial_codigoEspecial FOREIGN KEY (codigoEspecial)
REFERENCES tipoespecial (codigoEspecial) ON DELETE NO ACTION ON UPDATE NO ACTION;

-- 
-- Dumping data for table distribuidora
--
INSERT INTO distribuidora VALUES
(1, 'DC COMICS', 47569824, 'EEUU'),
(2, 'MARVEL', 45879635, 'EEUU');

-- 
-- Dumping data for table guionista
--
INSERT INTO guionista VALUES
(1, 'Alan Moore'),
(2, 'Mark Millar'),
(3, 'Jeph Loeb'),
(4, 'Lee Bermejo');

-- 
-- Dumping data for table dibujante
--
INSERT INTO dibujante VALUES
(1, 'Brian Bolland'),
(2, 'Leinil Yu'),
(3, 'Ed McGuiness'),
(4, 'John Romita Jr.'),
(5, 'David Finch'),
(6, 'John Cassaday'),
(7, 'Steve McNiven');

-- 
-- Dumping data for table venta
--
INSERT INTO venta VALUES
(1, '0000-00-00'),
(2, '1999-08-23'),
(3, '2008-05-19'),
(5, '1998-05-04'),
(8, '2008-09-27');

-- 
-- Dumping data for table compra
--
INSERT INTO compra VALUES
(1, '2018-09-07', 1);

-- 
-- Dumping data for table personajes
--
INSERT INTO personajes VALUES
(1, 'batman'),
(2, 'spiderman'),
(3, 'IronMan');

-- 
-- Dumping data for table tipoespecial
--
INSERT INTO tipoespecial VALUES
(0, 'Sin condicion especial'),
(1, 'Edicion Semilimitada');

-- 
-- Dumping data for table comic
--
INSERT INTO comic VALUES
(1, '1', 1, 2001, '1', '1', 1),
(2, '2', 2, 2002, '2', '2', 2),
(4, '4', 4, 2004, '4', '4', 4),
(6, '6', 6, 2006, '6', '6', 6),
(14, '14', 14, 2014, '14', '14', 5),
(25, '25', 25, 2025, '25', '25', 25),
(35, 'para ver', 89, 1999, '47', 'para ver si muestra bien', 47),
(48, '48', 48, 2048, '48', '48', 48),
(69, '69', 69, 2069, '69', '96', 69),
(85, '85', 85, 1985, '85', '85', 85),
(202, '202', 202, 2020, '202', '202', 202),
(2018, 'Provando especial', 13, 2018, '123', 'PRovando especial', 58),
(2020, '2020', 20, 2000, 'fefe', 'preubas', 87),
(9898, '8989', 8484, 2057, '21', '54', 20);

-- 
-- Dumping data for table guionistacomic
--
INSERT INTO guionistacomic VALUES
(1, 1),
(1, 2),
(1, 35),
(1, 69),
(1, 202),
(1, 2018),
(1, 9898),
(2, 1),
(2, 2),
(2, 4),
(2, 14),
(2, 25),
(2, 35),
(2, 2020),
(2, 9898),
(3, 1),
(3, 2),
(3, 14),
(3, 35),
(3, 85),
(3, 9898),
(4, 1),
(4, 48),
(4, 85),
(4, 2020);

-- 
-- Dumping data for table facturac
--
INSERT INTO facturac VALUES
(1, 245789632, 'TITO');

-- 
-- Dumping data for table factura
--
INSERT INTO factura VALUES
(1, 4578628, 'Diego'),
(2, 8756123, 'gregor'),
(3, 8547896, 'FEro');

-- 
-- Dumping data for table dibujantecomic
--
INSERT INTO dibujantecomic VALUES
(6, 5),
(6, 6),
(35, 1),
(35, 2),
(202, 3),
(2018, 1),
(2020, 1),
(2020, 2),
(2020, 3),
(9898, 2),
(9898, 4);

-- 
-- Dumping data for table detalleventa
--
INSERT INTO detalleventa VALUES
(1, 1, 1, 5),
(2, 35, 1, 20);

-- 
-- Dumping data for table detallecompra
--
INSERT INTO detallecompra VALUES
(1, 1, 1, 80, NULL);

-- 
-- Dumping data for table comicpersonajes
--
INSERT INTO comicpersonajes VALUES
(35, 1),
(35, 2),
(35, 3),
(2018, 1),
(2020, 1),
(2020, 2);

-- 
-- Dumping data for table comicespecial
--
-- Table tiendacomics.comicespecial does not contain any data (it is empty)

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;